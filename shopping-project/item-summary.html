<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Shopping Cart</title>
    
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
	<link href="css/stylesheet.css" rel="stylesheet" type="text/css" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

   <!-- Compiled and minified JavaScript -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
	
	<!-- for image slider -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  
  
	<script src="js/shopping.js"></script>
  </head>
  <body>
    <div class= "container">
	<!-- write code for header here -->
		<div class="row">
			<div id="logo" class="col-8">
				<a href="index.html" style="color:#000;text-decoration:none;font-family: 'Comic Sans MS', cursive, sans-serif;font-size:30px;">myShopping.com</a>
			</div>
			<div class="col-1  ml-auto">
				<span style="display:inline;"><a class="menu" href=""><i class="fa fa-address-book" aria-hidden="true">About us</i></a></span>
			</div>
			<div class="col-1" >
				<a class="menu" href=""><i class="fa fa-product-hunt" aria-hidden="true">Products</i></a>
			</div>
			<div class="col-1">
				<a class="menu" href=""><i class="fa fa-shopping-cart" aria-hidden="true">Orders</i></a>
			</div>	
			<div class="col-1">
				<a class="menu" href=""><i class="fa fa-globe" aria-hidden="true">Contact</i></a>
			</div> 
		</div><!-- header tag ends here -->
		<div class="row">
			<div id="logo" class="col-12">
				<img src="img/cover-1.jpeg" />
			</div>
		</div>
		<div class="row">
			<div class="col-12">
				<a href="index.html">Go Back</a>
			</div>
		</div>
		
		<div class="row">
			<div  class="col-2">
				<label class="product-image">Image</label>
			</div>
			<div  class="col-5">
				<label class="product-product">Product</label>
			</div>
			<div  class="col-1">
				<label class="product-price">Price</label>
			</div>
			<div  class="col-1">
				<label class="product-quantity">Quantity</label>
			</div>
			<div  class="col-1">
				<label class="product-size">Size</label>
			</div>
			<div  class="col-1">
				<label class="product-remove">Remove</label>
			</div>
			<div  class="col-1">
				<label class="product-total">Total</label>
			</div>
		</div>
		<div class="row" id="abc">
			<!-- <div  class="col-2">
				<img src="img/women/women-link-1.jpeg" class="item_img" style="width:100%;height:150px;"/>
			</div>
			<div  class="col-5">
				<p ><h4 class="item_header" style="font-weight:bold">Rare Casual 3/4th Sleeve Solid Women's Pink Top</h4><h5 class="item_description">Looking your best is no longer an ordeal! RARE has a wardrobe solution for every casual occasion. 
												Size is not an issue any more. Itâ€™s all about preference, your preference!</h5> </p>
			</div>
			<div  class="col-1">
				<label class="item_price">$150.58</label>
			</div>
			<div  class="col-1" >
				<label class="item_quantity"><input style="width:100%" type="number" value="2" min="1"></label>
			</div>
			<div  class="col-1">
				<label class="item_size">XL</label>
			</div>
			<div  class="col-1">
				      <button class="remove_item">Remove</button>
			</div>
			<div  class="col-1">
				<label class="item_total">$150.58</label>
			</div> -->
		</div>
		<div class="row">
			<div  class="col-2 ml-auto">
				<p><label class="product-subtotal">Sub-Total</label>
				<label class="product-subtotalAmount">$150.58</label> </p>
				<p><label class="product-tax">Tax(5%)</label>
				<label class="product-taxAmt">$50.58</label></p>
				<p><label class="product-shipping">Shipping(10%)</label>
				<label class="product-shippingAmt">$150.58</label></p>
				<p><label class="product-grandTotal">Grand Total</label>
				<label class="product-grandTotalAmt">$350.58</label></p>
			</div>
			
		</div>
		
		<div class="row">
			<div class="col-4 ml-auto">
				<a  class="btn btn-primary btn-lg active" href="item-order.html" role="button" aria-pressed="true" style="width:100%;margin:10px;" id="check-out">CHECK OUT</a>
			</div>
		</div>
		<!-- write code for footer  here -->
		<div class="row">
			<div class="col-12" style="background-color:#424242;margin-top:40px;padding:5px;margin-bottom:20px;">
				<p><a href="" class="footer-link">Terms and Conditions</a>
				<a href="" class="footer-link">Privacy policy</a></p>
				<p class="footer-copyright"><!--<i class="fa fa-copyright" aria-hidden="true"></i>--> &copy; 2018 myShopping.com</p>
			</div>
		</div><!-- footer ends here -->
		
			
	
	<script>
		var itemArray = localStorage.getItem("items");
		var  y = JSON.parse(itemArray);
		console.log("How man items are in array? " + y.length);
		var orderSummaryArray = [];
		//console.log(y);
		var  item_total = 0;
		var  sum = 0;
		var html = "";
	 for (i = 0;i < y.length;i++){
		var dic  = y[i];
		var arr = y[i].product_price.split('$');
		item_total = (y[i].product_quantity * arr[1]);
		
		sum += (y[i].product_quantity * arr[1]);
		$(".item_img").attr("src" ,y[i].img_src);
		$('.item_header').html(y[i].product_header);
		$('.item_description').text(y[i].product_description);
		$('.item_price').text(y[i].product_price);
		$('.item_quantity').text(y[i].product_quantity);
		$('.item_size').text(y[i].product_size);
		$('.item_total').text('$'+item_total);
		console.log(y[i]);
		
		 html += 		// "<div  id ='" + i +"'> "	+
							"<div class='col-2'><img class='item_img_"+i+"' style='width:100px;height:150px;' src='" + y[i].img_src + "'></div>"
					+		"<div  class='col-5'> <p> <h4 class='item_header_"+i+"'  style='font-weight:bold'>" + y[i].product_header + "</h4>"
					+		"<h5 class='item_description_"+i+"' >" + y[i].product_description + "</h5></p></div>"
					+		"<div  class='col-1'><label class='item_price_"+i+"'>" + y[i].product_price + "</label></div>"
					+		"<div  class='col-1'><label class='item_quantity_"+i+"' >" + y[i].product_quantity + "</label></div>"
					+		"<div  class='col-1'><label class='item_size_"+i+"' >" + y[i].product_size + "</label></div>"
					+ 	 "<div  class='col-1'><button  class='remove_item' id='remove_item_"+i+"' >Remove</button></div>"
					+		"<div  class='col-1'><label   class='item_total_"+i+"' >" + item_total + "</label></div>";
				//	+ 	"</div>";
					
		 
		
		
	  }
	  
	 $("#abc").append(html);
	  

		
	
	 $(".remove_item").click(function() {
		var getID = this.id;
		var arr = this.id.split('_');
		var i = arr[2];
		alert(arr[2]);
		var sum1 = 0;
		$('.item_img_'+i).remove();
		$('.item_header_'+i).remove();
		$('.item_description_'+i).remove();
		$('.item_price_'+i).remove();
		$('.item_quantity_'+i).remove();
		$('.item_size_'+i).remove();
		$('#remove_item_'+i).remove();
		$('.item_total_'+i).remove();

		y.splice(i, 1);
		console.log(y);
		var z = y;
		for (i = 0;i < z.length;i++){
			var dic  = z[i];
			var arr1 = z[i].product_price.split('$');
			item_total = (z[i].product_quantity * arr1[1]);
			
			sum1 += (z[i].product_quantity * arr1[1]);
		}
		
		$('.product-subtotalAmount').text('$'+sum1);
		var tax1 = (sum1*(5/100));
		var shipping1 = (sum1*(10/100));
		var product_grandTotalAmt1 = (sum1 + tax1 + shipping1);
		$('.product-taxAmt').text('$'+tax);
		$('.product-shippingAmt').text('$'+shipping1);
		$('.product-grandTotalAmt').text('$'+product_grandTotalAmt1);
		y = z;
		
		
		
	});
	
	
	$('.product-subtotalAmount').text('$'+sum);
	var tax = (sum*(5/100));
	var shipping = (sum*(10/100));
	var product_grandTotalAmt = (sum + tax + shipping);
	$('.product-taxAmt').text('$'+tax);
	$('.product-shippingAmt').text('$'+shipping);
	$('.product-grandTotalAmt').text('$'+product_grandTotalAmt);
	 
/*	var orderSummaryDict = {
		"item_total" : sum,
		"tax" : tax,
		"shipping" : shipping,
		"product_grandTotalAmt" : product_grandTotalAmt
	}
		
	orderSummaryArray.push(orderSummaryDict);
	
	var orderSummary = JSON.stringify(orderSummaryArray);
	localStorage.setItem("orderSummary",orderSummary);
	*/
	
	$("#check-out").click(function() {
	
	
	var sum2 = $('.product-subtotalAmount').text();

	var tax2 = $('.product-taxAmt').text().split('$')[1];
	var shipping2 = $('.product-shippingAmt').text().split('$')[1];
	var product_grandTotalAm2 = $('.product-grandTotalAmt').text().split('$')[1];
	
	
	 var orderSummaryDict = {
		"item_total" : sum2,
		"tax" : tax2,
		"shipping" : shipping2,
		"product_grandTotalAmt" : product_grandTotalAm2
	}
	
	orderSummaryArray.push(orderSummaryDict);
	
	var orderSummary = JSON.stringify(orderSummaryArray);
	localStorage.setItem("orderSummary",orderSummary);
	
	});
	
	</script>
  </body>
</html>